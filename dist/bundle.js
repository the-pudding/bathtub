!function(){var t={296:function(t,e,n){var a=/^\s+|\s+$/g,r=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,i=/^0o[0-7]+$/i,o=parseInt,l="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,c="object"==typeof self&&self&&self.Object===Object&&self,d=l||c||Function("return this")(),u=Object.prototype.toString,h=Math.max,f=Math.min,p=function(){return d.Date.now()};function m(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function g(t){if("number"==typeof t)return t;if(function(t){return"symbol"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&"[object Symbol]"==u.call(t)}(t))return NaN;if(m(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=m(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(a,"");var n=s.test(t);return n||i.test(t)?o(t.slice(2),n?2:8):r.test(t)?NaN:+t}t.exports=function(t,e,n){var a,r,s,i,o,l,c=0,d=!1,u=!1,b=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function y(e){var n=a,s=r;return a=r=void 0,c=e,i=t.apply(s,n)}function x(t){return c=t,o=setTimeout(v,e),d?y(t):i}function w(t){var n=t-l;return void 0===l||n>=e||n<0||u&&t-c>=s}function v(){var t=p();if(w(t))return S(t);o=setTimeout(v,function(t){var n=e-(t-l);return u?f(n,s-(t-c)):n}(t))}function S(t){return o=void 0,b&&a?y(t):(a=r=void 0,i)}function T(){var t=p(),n=w(t);if(a=arguments,r=this,l=t,n){if(void 0===o)return x(l);if(u)return o=setTimeout(v,e),y(l)}return void 0===o&&(o=setTimeout(v,e)),i}return e=g(e)||0,m(n)&&(d=!!n.leading,s=(u="maxWait"in n)?h(g(n.maxWait)||0,e):s,b="trailing"in n?!!n.trailing:b),T.cancel=function(){void 0!==o&&clearTimeout(o),c=0,a=l=r=o=void 0},T.flush=function(){return void 0===o?i:S(p())},T}}},e={};function n(a){var r=e[a];if(void 0!==r)return r.exports;var s=e[a]={exports:{}};return t[a](s,s.exports,n),s.exports}n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,{a:e}),e},n.d=function(t,e){for(var a in e)n.o(e,a)&&!n.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},function(){"use strict";var t=n(296),e=n.n(t);const a={android:()=>navigator.userAgent.match(/Android/i),blackberry:()=>navigator.userAgent.match(/BlackBerry/i),ios:()=>navigator.userAgent.match(/iPhone|iPad|iPod/i),opera:()=>navigator.userAgent.match(/Opera Mini/i),windows:()=>navigator.userAgent.match(/IEMobile/i),any:()=>a.android()||a.blackberry()||a.ios()||a.opera()||a.windows()};var r=a;const s='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg>',i=d3.select("body");function o(t,e,n){const a=t.classed("is-visible");e.attr("aria-expanded",!a),t.classed("is-active",!a),t.classed("is-visible",!a),i.classed("modal-open",!a),!0===n&&(a?e.html((()=>s)):e.html((()=>'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-x"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>')))}function l(t){return new Promise(((e,n)=>{const a=t.split(".").pop();"csv"===a?d3.csv(`assets/data/${t}`).then(e).catch(n):"json"===a?d3.json(`assets/data/${t}`).then(e).catch(n):n(new Error(`unsupported file type for: ${t}`))}))}function c(t){if("string"==typeof t)return l(t);const e=t.map(l);return Promise.all(e)}const d=900,u=420;function h(t){return 0!==t.length}function f(t){const e=d3.select(t.node().parentNode),n=parseInt(t.style("width"),10),a=parseInt(t.style("height"),10),r=n/a;function s(){const n=parseInt(e.style("width"));t.attr("width",n),t.attr("height",Math.round(n/r))}t.attr("viewBox",`0 0 ${n} ${a}`).attr("preserveAspectRatio","xMinYMid").call(s),d3.select(window).on(`resize.${e.attr("id")}`,s)}var p=function(){(function(){const t="#best_actress_bar_chart";let e=d3.select(t).append("svg").attr("width",1100).attr("height",500).call(f).append("g").attr("transform","translate(100, 10)"),n={};c("best-actress-nominees.csv").then((a=>{a.forEach((t=>{let e=t["Oscar Year"],a=h(t.Bathtub),r=h(t.Shower),s=t.Film,i=t.Actress;n[e]||(n[e]={},n[e].count=0),n[e].bathTubScenes||(n[e].bathTubScenes=[]),n[e].showerScenes||(n[e].showerScenes=[]),n[e].count++,a&&n[e].bathTubScenes.push({film:s,actress:i}),r&&n[e].showerScenes.push({film:s,actress:i})}));let r=[];for(let t in n)r.push({year:t,bathTubScenes:n[t].bathTubScenes,showerScenes:n[t].showerScenes});let s=d3.select(t).append("div").attr("class","tooltip").style("visibility","hidden").style("position","absolute"),i=r.map((t=>t.year)),o=d3.scaleBand().domain(i).range([0,d]).padding([.2]);e.append("g").attr("transform","translate(0, 420)").call(d3.axisBottom(o).tickFormat(d3.format("d"))).selectAll("text").attr("dx","-1.5em").attr("dy","0.7em").attr("transform","rotate(-45)");let l=d3.scaleLinear().domain(d3.extent(r.map((t=>Math.max(t.bathTubScenes.length,t.showerScenes.length))))).range([u,0]);e.append("g").call(d3.axisLeft(l).ticks(4).tickFormat(d3.format("d")));let c=["showerScenes","bathTubScenes"],f=d3.scaleBand().domain(c).range([0,o.bandwidth()]).padding([.05]),p=d3.scaleOrdinal().domain(c).range(["#1f77b4","#ff7f0e"]),m=[];e.append("g").selectAll("g").data(r).enter().append("g").attr("class","bar").attr("transform",(t=>`translate(${o(t.year)}, 0)`)).selectAll("rect").data((t=>{let e=t.year;return c.map((n=>({year:e,sceneType:n,scenes:t[n]})))})).enter().append("rect").attr("x",(t=>f(t.sceneType))).attr("y",(t=>l(t.scenes.length))).attr("width",f.bandwidth()).attr("height",(t=>u-l(t.scenes.length))).attr("fill",(t=>p(t.sceneType))).on("mouseover",((t,e)=>{s.style("visibility","visible").html(function(t){let e=t.scenes,n=t.year,a=`<div>${"bathTubScenes"==t.sceneType?"Bathtub":"Shower"} Scenes in ${n}</div><ul>`;for(let t in e){let n=e[t],r=n.film,s=r.replace("/","_");a+=`<li>${n.actress}, <i>${r}</i></li>`;let i=`assets/images/bathtub-images/${s}.jpeg`;x(i)&&(a+=`<img src="${i}">`)}return a+="</ul>",a}(e))})).on("mousemove",(t=>{s.style("top",y(event.pageY,"y")).style("left",y(event.pageX,"x"))})).on("mouseout",(t=>{s.style("visibility","hidden")})),e.append("text").attr("class","x label").attr("text-anchor","middle").attr("x",450).attr("y",480).text("Oscar Year"),e.append("text").attr("class","y label").attr("text-anchor","middle").attr("x",-210).attr("y",-60).attr("dy",".75em").attr("transform","rotate(-90)").text("Number of Scenes");let g=e.append("g").attr("class","legend").attr("text-anchor","end").selectAll("g").data(c).enter().append("g").attr("transform",((t,e)=>`translate(0, ${20*e})`)).on("click",((t,e)=>{b(e)}));function b(t){-1==m.indexOf(t)?(m.push(t),m.length==c.length&&(m=[])):m.splice(m.indexOf(t),1);let n=[];c.forEach((t=>{-1==m.indexOf(t)&&n.push(t)})),f.domain(n).range([0,o.bandwidth()]);let a=e.selectAll(".bar").selectAll("rect").data((t=>{let e=t.year;return c.map((n=>({year:e,sceneType:n,scenes:t[n]})))}));a.filter((t=>m.indexOf(t.sceneType)>-1)).transition().attr("x",((t,e,n)=>+d3.select(n[e]).attr("x")+ +d3.select(n[e]).attr("width")/2)).attr("height",0).attr("width",0).attr("y",(t=>u)).duration(500),a.filter((t=>-1==m.indexOf(t.sceneType))).transition().attr("x",(t=>f(t.sceneType))).attr("y",(t=>l(t.scenes.length))).attr("width",f.bandwidth()).attr("height",(t=>u-l(t.scenes.length))).attr("fill",(t=>p(t.sceneType))).duration(500),g.selectAll("rect").transition().attr("fill",(t=>m.length?-1==m.indexOf(t)?p(t):"white":p(t))).duration(100)}function y(t,e){let n=window.innerWidth,a=10,r=d3.select(".tooltip").style("width");return"x"==e&&t>n/2&&(a-=+r.replace("px","")),a+t+"px"}function x(t){let e=new XMLHttpRequest;return e.open("HEAD",t,!1),e.send(),404!=e.status}g.append("rect").attr("x",883).attr("width",15).attr("height",15).attr("fill",p).attr("stroke",p).attr("stroke-width",2).on("click",((t,e)=>{b(e)})),g.append("text").attr("x",876).attr("y",9.5).attr("dy","0.32em").text((t=>"bathTubScenes"==t?"Bathtub":"Shower"))}))})(),function(){function t(t){return Math.max(...t)}let e=d3.select("#big_sample_line_chart").append("svg").attr("width",1100).attr("height",500).call(f).append("g").attr("transform","translate(100, 10)"),n={};const a="maleBathTubScenes",r="femaleBathTubScenes",s="maleShowerScenes",i="femaleShowerScenes",o=[a,r,s,i],l={[a]:"Male Bathtub Scenes",[r]:"Female Bathtub Scenes",[s]:"Male Shower Scenes",[i]:"Female Shower Scenes"};c("big-sample.csv").then((c=>{c.forEach((t=>{let e=t.Year,a=h(t["Bathtub Actor 1"]),r=h(t["Bathtub Actress 1"]),s=h(t["Shower Actor 1"]),i=h(t["Shower Actress 1"]);n[e]||(n[e]={});for(let t in o){let a=o[t];n[e][a]||(n[e][a]=0)}a&&n[e].maleBathTubScenes++,r&&n[e].femaleBathTubScenes++,s&&n[e].maleShowerScenes++,i&&n[e].femaleShowerScenes++}));let f=[],p=0;for(let e in n){let o=n[e].maleBathTubScenes,l=n[e].femaleBathTubScenes,c=n[e].maleShowerScenes,d=n[e].femaleShowerScenes,u=t([o,l,c,d]);u>p&&(p=u),f.push({year:e,[a]:o,[r]:l,[s]:c,[i]:d})}let m=d3.scaleLinear().domain(d3.extent(f.map((t=>t.year)))).range([0,d]);e.append("g").attr("transform","translate(0,420)").call(d3.axisBottom(m).tickFormat(d3.format("d"))).selectAll("text").attr("dx","-1.5em").attr("dy","0.7em").attr("transform","rotate(-45)");let g=d3.scaleLinear().domain(d3.extent(f.map((e=>t([e.maleBathTubScenes,e.femaleBathTubScenes,e.maleShowerScenes,e.femaleShowerScenes]))))).range([u,0]);e.append("g").call(d3.axisLeft(g).ticks(p).tickFormat(d3.format("d")));let b=["#4e79a7","#f28e2c","#e15759","#76b7b2"];!function(t){for(let n in t){let a=t[n];e.append("path").datum(f).transition().attr("class",`line-${a}`).attr("fill","none").attr("stroke",(()=>b[n])).attr("stroke-width",2).attr("d",d3.line().x((t=>m(t.year))).y((t=>g(t[a])))).duration(100)}}(o),e.append("text").attr("class","x label").attr("text-anchor","middle").attr("x",450).attr("y",480).text("Film Year"),e.append("text").attr("class","y label").attr("text-anchor","middle").attr("x",-210).attr("y",-60).attr("dy",".75em").attr("transform","rotate(-90)").text("Number of Scenes");let y=d3.scaleOrdinal().domain(o).range(b),x=e.append("g").attr("class","legend").attr("text-anchor","end").selectAll("g").data(o).enter().append("g").attr("transform",((t,e)=>`translate(0, ${20*e})`)).on("click",((t,n)=>{!function(t){-1==w.indexOf(t)?(w.push(t),w.length==o.length&&(w=[])):w.splice(w.indexOf(t),1);let n=[];o.forEach((t=>{-1==w.indexOf(t)&&n.push(t)}));for(let t in w){let n=w[t];e.selectAll(`path.line-${n}`).transition().duration(100).style("opacity",0)}for(let t in n){let a=n[t];e.selectAll(`path.line-${a}`).transition().duration(100).style("opacity",1)}x.selectAll("rect").transition().attr("fill",(t=>w.length?-1==w.indexOf(t)?y(t):"white":y(t))).duration(100)}(n)}));x.append("rect").attr("x",883).attr("width",15).attr("height",15).attr("fill",y).attr("stroke",y).attr("stroke-width",2),x.append("text").attr("x",876).attr("y",9.5).attr("dy","0.32em").text((t=>l[t]));let w=[]}))}()},m=function(){};const g=[{image:"2018_02_stand-up",url:"2018/02/stand-up",hed:"The Structure of Stand-Up Comedy"},{image:"2018_04_birthday-paradox",url:"2018/04/birthday-paradox",hed:"The Birthday Paradox Experiment"},{image:"2018_11_boy-bands",url:"2018/11/boy-bands",hed:"Internet Boy Band Database"},{image:"2018_08_pockets",url:"2018/08/pockets",hed:"Womenâ€™s Pockets are Inferior"}];let b=null;function y(t){return`\n\t<a class='footer-recirc__article' href='https://pudding.cool/${t.url}' target='_blank' rel='noopener'>\n\t\t<img class='article__img' src='https://pudding.cool/common/assets/thumbnails/640/${t.image}.jpg' alt='${t.hed}'>\n\t\t<p class='article__headline'>${t.hed}</p>\n\t</a>\n\t`}var x=function(){!function(t){const e=new XMLHttpRequest,n=`https://pudding.cool/assets/data/stories.json?v=${Date.now()}`;e.open("GET",n,!0),e.onload=()=>{if(e.status>=200&&e.status<400){const n=JSON.parse(e.responseText);t(n)}else t(g)},e.onerror=()=>t(g),e.send()}((t=>{b=t,function(){const t=window.location.href,e=b.filter((e=>!t.includes(e.url))).slice(0,4).map(y).join("");d3.select(".pudding-footer .footer-recirc__articles").html(e)}()}))};const w=d3.select("body");let v=0;(function(t,e=document){return[...e.querySelectorAll(t)]})("[target='_blank']").forEach((t=>t.setAttribute("rel","noopener"))),w.classed("is-mobile",r.any()),window.addEventListener("resize",e()((function(){const t=w.node().offsetWidth;v!==t&&(v=t,m())}),150)),function(){const t=w.select("header");if(t.classed("is-sticky")){const e=w.select("#slide__menu"),n=w.select(".header__toggle");!function(t,e,n,a,r,i){const l=n.selectAll("a, button, .logo").nodes(),c=l[0],d=l[l.length-1];t.on("click",(()=>o(a,t,i))),e.on("click",(()=>o(a,e,i))),n.on("keydown",(e=>{const n=e.code,r=a.classed("is-visible");"Escape"===n&&!0===r&&(t.attr("aria-expanded",!1),t.node().focus(),a.classed("is-active",!1),a.classed("is-visible",!1),t.html((()=>s)))})),d3.select(c).on("keydown",(t=>{if(a.classed("is-visible")){const e=t.code,n=t.shiftKey;"Tab"===e&&!0===n&&(t.preventDefault(),d.focus())}})),d3.select(d).on("keydown",(t=>{if(a.classed("is-visible")){const e=t.code,n=t.shiftKey;"Tab"===e&&!1===n&&(t.preventDefault(),c.focus())}}))}(n,n,t,e,0,!0)}}(),p(),x()}()}();